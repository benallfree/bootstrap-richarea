"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1),n(2);var r=n(3);!function(t){t(function(){t.fn.richarea=function(e){e=t.extend(!0,{mode:"edit"},e);var n=t(this);e=t.extend(!0,{},{container:n},e);r.create(e)}})}(jQuery)},function(t,e){!function(){Array.prototype.move||(Array.prototype.move=function(t,e){for(;t<0;)t+=this.length;for(;e<0;)e+=this.length;if(e>=this.length)for(var n=e-this.length;n--+1;)this.push(void 0);return this.splice(e,0,this.splice(t,1)[0]),this})}(void 0)},function(t,e){jQuery.fn.visible=function(){return this.css("visibility","visible")},jQuery.fn.invisible=function(){return this.css("visibility","hidden")},jQuery.fn.visibilityToggle=function(){return this.css("visibility",function(t,e){return"visible"==e?"hidden":"visible"})}},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(4),u=n(8),c=n(5),a=function(){function t(){r(this,t)}return o(t,null,[{key:"registerEditor",value:function(t){var e=t.name;if(this.editors[e])throw TypeError("Editor "+e+" is already registered with RichArea.");this.editors[e]=t}},{key:"ensureLayouts",value:function(t){var e=this,n=c.defer(),r=[];return t.forEach(function(t){e.layoutUrls[t]||r.push(i.parse(t).then(function(n){for(var r in n){var o=n[r];for(var i in o.fields){var c=o.fields[i];if(!e.editors[c.editor])throw new TypeError("Editor "+c.editor+" has not been registered.");e.editors[c.editor].initField(c,o)}}e.layoutUrls[t]=n,Object.keys(n).forEach(function(t){e.localVueComponents["c"+t]=u.createFromLayout(n[t]),$.extend(e.layoutCategorieslayouts,n[t].categories)}),e.layouts=$.extend(!0,{},n,e.layouts)}))}),c.all(r).then(function(){n.resolve()}).fail(function(t){n.reject(t)}),n.promise}},{key:"create",value:function(t){var e=this;if(t=$.extend(!0,{},{container:null,root:null,assetRoot:"",imageUploadUrl:null,layouts:[],items:[],mode:"edit"},t),!t.container)throw new TypeError("RichArea must be attached to a DOM element container.");if(0==t.layouts.length)throw new TypeError("RichArea must have at least one layout file defined.");var n=[$.get(t.assetRoot+"/"+t.mode+".html").then(function(e){t.root=$("<div class='richarea'>"+e+"</div>"),t.container.append(t.root)}),this.ensureLayouts(t.layouts).then(function(){if(0==Object.keys(t.layouts).length)throw new TypeError("You must define at least one layout.")})];c.all(n).then(function(){e.initVue(t)}).done()}},{key:"ensureDefaultValues",value:function(t){var e=this;if(t instanceof Array)return t.forEach(function(t){e.ensureDefaultValues(t)}),t;$.extend(!0,t,{data:{}});var n=this.layouts[t.layout_id];if(!n)throw new TypeError("Undefined layout "+t.layout_id);var r=n.fields;return Object.keys(r).forEach(function(e){e in t.data||(t.data[e]=r[e].defaultValue)}),t}},{key:"initVue",value:function(t){function e(){return $(t.root).find(".richarea-app")}function n(){return $(t.root).find(".richarea-editor")}function r(){return n().find(".sortable")}var o=this.ensureDefaultValues($.extend(!0,[],t.items)),i=$.extend(!0,t,{content:null,itemsJson:null,currentIdx:null,$currentLayout:null,items:o,selectedCategory:"default",layoutCategories:this.layoutCategories,layouts:this.layouts});new Vue({components:this.localVueComponents,el:t.root.find(".richarea-app").get(0),data:i,computed:{currentItem:function(){return this.items[this.currentIdx]},currentLayout:function(){var t=this.items[this.currentIdx];return t?this.layouts[t.layout_id]:null},config:function(){return{assetRoot:this.assetRoot,imageUploadUrl:this.imageUploadUrl}}},filters:{titlecase:function(t){var e=t.replace(/([A-Z])/g," $1"),n=e.charAt(0).toUpperCase()+e.slice(1);return n},jsonify:function(t){return JSON.stringify(t)}},watch:{currentIdx:function(t){this.$nextTick(function(){r().find(".tools").hide(),null!=t&&r().find("li.active .tools").show()})},items:{handler:function(t,e){this.calc()},deep:!0}},methods:{ensureDefaultValues:this.ensureDefaultValues,add:function(t){this.currentIdx=t;var e=n().find(".layouts-modal");e.modal("show")},selectCat:function(t){this.selectedCategory=t[0]},inActiveCategories:function(t){return this.selectedCategory==-1||t.categories[this.selectedCategory]},notifyChange:function(){t.onChange&&t.onChange({html:this.content,data:this.items})},close:function(){n().find(".modal.in").modal("hide"),setTimeout(this.calc,0)},calc:function(){var t=this;this.$nextTick(function(){n().find(".modal.layout-settings.in").length>0||(t.calcContent(),t.calcJson(),t.notifyChange())})},calcJson:function(){this.itemsJson=JSON.stringify(this.items)},calcContent:function(){var t=[];r().find(".item .layout-container").each(function(e,n){var r=$(n).clone();r.find("[data-render]").each(function(t,e){var n=$(e);n.replaceWith(n.data("render"))}),["data-editor","data-field","data-default-value"].forEach(function(t){r.find("["+t+"]").removeAttr(t)});var o=r.html();t.push(o)});var e=$("<div>").addClass("richarea");e.html(t.join("\n")),this.content=e.get(0).outerHTML},select:function(t){var e=$(t.target).closest("li");this.currentIdx=e.index(),this.$currentLayout=e},insert:function(t){var e=this.ensureDefaultValues({layout_id:t}),n=r().find("li.active").index();n>=0?(this.items.splice(n,0,e),this.currentIdx=n):(this.items.push(e),this.currentIdx=this.items.length-1)},edit:function(t){var e=n().find(".layout-settings");e.modal("show")},duplicate:function(t){this.items.splice(this.currentIdx,0,$.extend(!0,{},this.items[this.currentIdx]))},remove:function(t){var e=confirm("Are you sure you want to delete this item?");e&&(this.items.splice(this.currentIdx,1),this.currentIdx=null)}},mounted:function(){var t=this;this.calc(),e().show(),r().sortable({placeholder:"alert alert-warning",items:"li:not(.disabled)",handle:".move",helper:"clone",stop:function(e,n){n.placeholder.height(n.item.height()),n.placeholder.width(n.item[0].offsetWidth);var o=$(n.item),i=o.data("index"),u=o.index();t.items.move(i,u),t.currentIdx=u,r().sortable("cancel")},cursor:"move"}),$.prototype.fullscreen&&n().find(".layouts-modal").fullscreen(),console.log("mount"),"function"==typeof window.callPhantom&&setTimeout(function(){window.callPhantom("takeShot")},1e4)}})}},{key:"get",value:function(t){function e(){xhrSuccess(r)?o.resolve(r.responseText):n()}function n(){o.reject("Can't XHR "+JSON.stringify(t))}if(0===URL.resolve(window.location,t).indexOf(FILE_PROTOCOL))throw new Error("XHR does not function for file: protocol");var r=new XMLHttpRequest,o=Promise.defer();try{r.open(GET,t,!0),r.overrideMimeType&&r.overrideMimeType(APPLICATION_JAVASCRIPT_MIMETYPE),r.onreadystatechange=function(){4===r.readyState&&e()},r.onload=r.load=e,r.onerror=r.error=n}catch(t){o.reject(t.message,t)}return r.send(),o.promise}}]),t}();a.editors={},a.layoutUrls={},a.layouts={},a.layoutCategories={},a.localVueComponents={},a.registerEditor(n(9)),a.registerEditor(n(11)),a.registerEditor(n(12)),t.exports=a},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(5),u=function(){function t(){r(this,t)}return o(t,null,[{key:"parse",value:function(t){var e=i.defer();return $.get(t,function(t){var n={},r=$("<div>");r.html(t),r.children("div").each(function(t,e){var r=$(e),o={},i=r.data("id");r.find("[data-editor]").each(function(t,e){var n=($(e),$(e).data("default-value"));o[$(e).data("field")]={editor:$(e).data("editor"),defaultValue:n}}),["data-editor","data-field","data-default-value"].forEach(function(t){r.find("["+t+"]").removeAttr(t)});var u=r.html().trim(),c=r.data("cat");"string"==typeof c&&(c=JSON.parse(c.replace(/'/g,'"')));var a={};c.forEach(function(t){a[t]=!0}),n[i]={id:r.data("id"),fields:$.extend(!0,{},o),categories:a,template:u}}),e.resolve(n)}),e.promise}}]),t}();t.exports=u},function(t,e,n){(function(e,n){!function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else{t.exports=e()}}(function(){function t(t){return function(){return Y.apply(t,arguments)}}function r(t){return t===Object(t)}function o(t){return"[object StopIteration]"===rt(t)||t instanceof B}function i(t,e){if(Q&&e.stack&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&null!==t&&t.stack&&t.stack.indexOf(ot)===-1){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+ot+"\n");t.stack=u(o)}}function u(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var o=e[r];f(o)||c(o)||!o||n.push(o)}return n.join("\n")}function c(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function a(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function f(t){var e=a(t);if(!e)return!1;var n=e[0],r=e[1];return n===H&&r>=X&&r<=ft}function s(){if(Q)try{throw new Error}catch(r){var t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],n=a(e);if(!n)return;return H=n[0],n[1]}}function l(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function p(t){return t instanceof v?t:g(t)?C(t):R(t)}function d(){function t(t){e=t,i.source=t,Z(n,function(e,n){p.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],o=tt(d.prototype),i=tt(v.prototype);if(i.promiseDispatch=function(t,o,i){var u=q(arguments);n?(n.push(u),"when"===o&&i[1]&&r.push(i[1])):p.nextTick(function(){e.promiseDispatch.apply(e,u)})},i.valueOf=function(){if(n)return i;var t=w(e);return b(t)&&(e=t),t},i.inspect=function(){return e?e.inspect():{state:"pending"}},p.longStackSupport&&Q)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){e||t(p(n))},o.fulfill=function(n){e||t(R(n))},o.reject=function(n){e||t(O(n))},o.notify=function(t){e||Z(r,function(e,n){p.nextTick(function(){n(t)})},void 0)},o}function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=d();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function y(t){return h(function(e,n){for(var r=0,o=t.length;r<o;r++)p(t[r]).then(e,n)})}function v(t,e,n){void 0===e&&(e=function(t){return O(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=tt(v.prototype);if(r.promiseDispatch=function(n,o,i){var u;try{u=t[o]?t[o].apply(r,i):e.call(r,o,i)}catch(t){u=O(t)}n&&n(u)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function m(t,e,n,r){return p(t).then(e,n,r)}function w(t){if(b(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function b(t){return t instanceof v}function g(t){return r(t)&&"function"==typeof t.then}function T(t){return b(t)&&"pending"===t.inspect().state}function k(t){return!b(t)||"fulfilled"===t.inspect().state}function j(t){return b(t)&&"rejected"===t.inspect().state}function x(){it.length=0,ut.length=0,at||(at=!0)}function _(t,n){at&&("object"===("undefined"==typeof e?"undefined":_typeof(e))&&"function"==typeof e.emit&&p.nextTick.runAfter(function(){z(ut,t)!==-1&&(e.emit("unhandledRejection",n,t),ct.push(t))}),ut.push(t),n&&"undefined"!=typeof n.stack?it.push(n.stack):it.push("(no stack) "+n))}function E(t){if(at){var n=z(ut,t);n!==-1&&("object"===("undefined"==typeof e?"undefined":_typeof(e))&&"function"==typeof e.emit&&p.nextTick.runAfter(function(){var r=z(ct,t);r!==-1&&(e.emit("rejectionHandled",it[n],t),ct.splice(r,1))}),ut.splice(n,1),it.splice(n,1))}}function O(t){var e=v({when:function(e){return e&&E(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return _(e,t),e}function R(t){return v({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return nt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function C(t){var e=d();return p.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function I(t){return v({isDef:function(){}},function(e,n){return D(t,e,n)},function(){return p(t).inspect()})}function P(t,e,n){return p(t).spread(e,n)}function $(t){return function(){function e(t,e){var u;if("undefined"==typeof StopIteration){try{u=n[t](e)}catch(t){return O(t)}return u.done?p(u.value):m(u.value,r,i)}try{u=n[t](e)}catch(t){return o(t)?p(t.value):O(t)}return m(u,r,i)}var n=t.apply(this,arguments),r=e.bind(e,"next"),i=e.bind(e,"throw");return r()}}function S(t){p.done(p.async(t)())}function A(t){throw new B(t)}function N(t){return function(){return P([this,V(arguments)],function(e,n){return t.apply(e,n)})}}function D(t,e,n){return p(t).dispatch(e,n)}function V(t){return m(t,function(t){var e=0,n=d();return Z(t,function(r,o,i){var u;b(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++e,m(o,function(r){t[i]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:i,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function U(t){if(0===t.length)return p.resolve();var e=p.defer(),n=0;return Z(t,function(r,o,i){function u(t){e.resolve(t)}function c(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function a(t){e.notify({index:i,value:t})}var f=t[i];n++,m(f,u,c,a)},void 0),e.promise}function L(t){return m(t,function(t){return t=K(t,p),m(V(K(t,function(t){return m(t,G,G)})),function(){return t})})}function F(t){return p(t).allSettled()}function M(t,e){return p(t).then(void 0,void 0,e)}function J(t,e){return p(t).nodeify(e)}var Q=!1;try{throw new Error}catch(t){Q=!!t.stack}var H,B,X=s(),G=function(){},W=function(){function t(){for(var t,e;o.next;)o=o.next,t=o.task,o.task=void 0,e=o.domain,e&&(o.domain=void 0,e.enter()),r(t,e);for(;f.length;)t=f.pop(),r(t);u=!1}function r(e,n){try{e()}catch(e){if(a)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),e;setTimeout(function(){throw e},0)}n&&n.exit()}var o={task:void 0,next:null},i=o,u=!1,c=void 0,a=!1,f=[];if(W=function(t){i=i.next={task:t,domain:a&&e.domain,next:null},u||(u=!0,c())},"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"[object process]"===e.toString()&&e.nextTick)a=!0,c=function(){e.nextTick(t)};else if("function"==typeof n)c="undefined"!=typeof window?n.bind(window,t):function(){n(t)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){c=l,s.port1.onmessage=t,t()};var l=function(){s.port2.postMessage(0)};c=function(){setTimeout(t,0),l()}}else c=function(){setTimeout(t,0)};return W.runAfter=function(t){f.push(t),u||(u=!0,c())},W}(),Y=Function.call,q=t(Array.prototype.slice),Z=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),z=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),K=t(Array.prototype.map||function(t,e){var n=this,r=[];return Z(n,function(o,i,u){r.push(t.call(e,i,u,n))},void 0),r}),tt=Object.create||function(t){function e(){}return e.prototype=t,new e},et=t(Object.prototype.hasOwnProperty),nt=Object.keys||function(t){var e=[];for(var n in t)et(t,n)&&e.push(n);return e},rt=t(Object.prototype.toString);B="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var ot="From previous event:";p.resolve=p,p.nextTick=W,p.longStackSupport=!1,"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e&&e.env&&e.env.Q_DEBUG&&(p.longStackSupport=!0),p.defer=d,d.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(q(arguments,1)):t.resolve(n)}},p.Promise=h,p.promise=h,h.race=y,h.all=V,h.reject=O,h.resolve=p,p.passByCopy=function(t){return t},v.prototype.passByCopy=function(){return this},p.join=function(t,e){return p(t).join(e)},v.prototype.join=function(t){return p([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},p.race=y,v.prototype.race=function(){return this.then(p.race)},p.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(t){return O(t)}}function o(t){if("function"==typeof e){i(t,c);try{return e(t)}catch(t){return O(t)}}return O(t)}function u(t){return"function"==typeof n?n(t):t}var c=this,a=d(),f=!1;return p.nextTick(function(){c.promiseDispatch(function(t){f||(f=!0,a.resolve(r(t)))},"when",[function(t){f||(f=!0,a.resolve(o(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=u(t)}catch(t){if(n=!0,!p.onerror)throw t;p.onerror(t)}n||a.notify(e)}]),a.promise},p.tap=function(t,e){return p(t).tap(e)},v.prototype.tap=function(t){return t=p(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},p.when=m,v.prototype.thenResolve=function(t){return this.then(function(){return t})},p.thenResolve=function(t,e){return p(t).thenResolve(e)},v.prototype.thenReject=function(t){return this.then(function(){throw t})},p.thenReject=function(t,e){return p(t).thenReject(e)},p.nearer=w,p.isPromise=b,p.isPromiseAlike=g,p.isPending=T,v.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=k,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=j,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var it=[],ut=[],ct=[],at=!0;p.resetUnhandledRejections=x,p.getUnhandledReasons=function(){return it.slice()},p.stopUnhandledRejectionTracking=function(){x(),at=!1},x(),p.reject=O,p.fulfill=R,p.master=I,p.spread=P,v.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},p.async=$,p.spawn=S,p.return=A,p.promised=N,p.dispatch=D,v.prototype.dispatch=function(t,e){var n=this,r=d();return p.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},p.get=function(t,e){return p(t).dispatch("get",[e])},v.prototype.get=function(t){return this.dispatch("get",[t])},p.set=function(t,e,n){return p(t).dispatch("set",[e,n])},v.prototype.set=function(t,e){return this.dispatch("set",[t,e])},p.del=p.delete=function(t,e){return p(t).dispatch("delete",[e])},v.prototype.del=v.prototype.delete=function(t){return this.dispatch("delete",[t])},p.mapply=p.post=function(t,e,n){return p(t).dispatch("post",[e,n])},v.prototype.mapply=v.prototype.post=function(t,e){return this.dispatch("post",[t,e])},p.send=p.mcall=p.invoke=function(t,e){return p(t).dispatch("post",[e,q(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(t){return this.dispatch("post",[t,q(arguments,1)])},p.fapply=function(t,e){return p(t).dispatch("apply",[void 0,e])},v.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},p.try=p.fcall=function(t){return p(t).dispatch("apply",[void 0,q(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,q(arguments)])},p.fbind=function(t){var e=p(t),n=q(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(q(arguments))])}},v.prototype.fbind=function(){var t=this,e=q(arguments);return function(){return t.dispatch("apply",[this,e.concat(q(arguments))])}},p.keys=function(t){return p(t).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},p.all=V,v.prototype.all=function(){return V(this)},p.any=U,v.prototype.any=function(){return U(this)},p.allResolved=l(L,"allResolved","allSettled"),v.prototype.allResolved=function(){return L(this)},p.allSettled=F,v.prototype.allSettled=function(){return this.then(function(t){return V(K(t,function(t){function e(){return t.inspect()}return t=p(t),t.then(e,e)}))})},p.fail=p.catch=function(t,e){return p(t).then(void 0,e)},v.prototype.fail=v.prototype.catch=function(t){return this.then(void 0,t)},p.progress=M,v.prototype.progress=function(t){return this.then(void 0,void 0,t)},p.fin=p.finally=function(t,e){return p(t).finally(e)},v.prototype.fin=v.prototype.finally=function(t){return t=p(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},p.done=function(t,e,n,r){return p(t).done(e,n,r)},v.prototype.done=function(t,n,r){var o=function(t){p.nextTick(function(){if(i(t,u),!p.onerror)throw t;p.onerror(t)})},u=t||n||r?this.then(t,n,r):this;"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e&&e.domain&&(o=e.domain.bind(o)),u.then(void 0,o)},p.timeout=function(t,e,n){return p(t).timeout(e,n)},v.prototype.timeout=function(t,e){var n=d(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},p.delay=function(t,e){return void 0===e&&(e=t,t=void 0),p(t).delay(e)},v.prototype.delay=function(t){return this.then(function(e){var n=d();return setTimeout(function(){n.resolve(e)},t),n.promise})},p.nfapply=function(t,e){return p(t).nfapply(e)},v.prototype.nfapply=function(t){var e=d(),n=q(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},p.nfcall=function(t){var e=q(arguments,1);return p(t).nfapply(e)},v.prototype.nfcall=function(){var t=q(arguments),e=d();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},p.nfbind=p.denodeify=function(t){var e=q(arguments,1);return function(){var n=e.concat(q(arguments)),r=d();return n.push(r.makeNodeResolver()),p(t).fapply(n).fail(r.reject),r.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var t=q(arguments);return t.unshift(this),p.denodeify.apply(void 0,t)},p.nbind=function(t,e){var n=q(arguments,2);return function(){function r(){return t.apply(e,arguments)}var o=n.concat(q(arguments)),i=d();return o.push(i.makeNodeResolver()),p(r).fapply(o).fail(i.reject),i.promise}},v.prototype.nbind=function(){var t=q(arguments,0);return t.unshift(this),p.nbind.apply(void 0,t)},p.nmapply=p.npost=function(t,e,n){return p(t).npost(e,n)},v.prototype.nmapply=v.prototype.npost=function(t,e){var n=q(e||[]),r=d();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(t,e){var n=q(arguments,2),r=d();return n.push(r.makeNodeResolver()),p(t).dispatch("post",[e,n]).fail(r.reject),r.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(t){var e=q(arguments,1),n=d();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},p.nodeify=J,v.prototype.nodeify=function(t){return t?void this.then(function(e){p.nextTick(function(){t(null,e)})},function(e){p.nextTick(function(){t(e)})}):this},p.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ft=s();return p})}).call(e,n(6),n(7).setImmediate)},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(s===setTimeout)return setTimeout(t,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function u(){y&&d&&(y=!1,d.length?h=d.concat(h):v=-1,h.length&&c())}function c(){if(!y){var t=o(u);y=!0;for(var e=h.length;e;){for(d=h,h=[];++v<e;)d&&d[v].run();v=-1,e=h.length}d=null,y=!1,i(t)}}function a(t,e){this.fun=t,this.array=e}function f(){}var s,l,p=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(t){s=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var d,h=[],y=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new a(t,e)),1!==h.length||y||o(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){(function(t,r){function o(t,e){this._id=t,this._clearFn=e}var i=n(6).nextTick,u=Function.prototype.apply,c=Array.prototype.slice,a={},f=0;e.setTimeout=function(){return new o(u.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(u.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=f++,r=!(arguments.length<2)&&c.call(arguments,1);return a[n]=!0,i(function(){a[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete a[t]}}).call(e,n(7).setImmediate,n(7).clearImmediate)},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){n(this,t)}return r(t,null,[{key:"createFromLayout",value:function(t){return{props:["item","config"],template:"<div class='layout-container'>"+t.template+"</div>",filters:{embedify:function(t){function e(t){var e=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,n=t.match(e);return n&&11==n[2].length?n[2]:"error"}var n=e(t);return"//www.youtube.com/embed/"+n},linebreak:function(t){return t.replace("\n","<br/>")}}}}}]),t}();t.exports=o},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(10),a=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,null,[{key:"getVueData",value:function(){return{props:["item","fieldName"],template:'<input class="form-control" type="text" v-model="item.data[fieldName]"/>'}}}]),e}(c);t.exports=a},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){n(this,t)}return r(t,null,[{key:"initField",value:function(t,e){}},{key:"getVueData",value:function(){throw new TypeError("Must implement")}}]),t}();t.exports=o},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(10),a=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,null,[{key:"getVueData",value:function(){return{props:["item","fieldName"],template:'<textarea class="form-control" rows="3" v-model="item.data[fieldName]"></textarea>'}}}]),e}(c);t.exports=a},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(10),a=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),u(e,null,[{key:"getVueData",value:function(){return{props:["item","fieldName"],template:'\n        <div>\n          <input class="form-control" type="text" v-model="item.data[fieldName].href"></input>\n          <input class="form-control" type="text" v-model="item.data[fieldName].display"></input>\n        </div>\n      '
}}}]),e}(c);t.exports=a}]);